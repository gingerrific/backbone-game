"use strict";var Game={Models:{},Collections:{},Views:{},Routers:{},models:{},collections:{},views:{},routers:{}};Game.Views.AppView=Backbone.View.extend({events:{},initialize:function(){Game.collections.mapCollection=new Game.Collections.MapCollection,Game.collections.mapCollection.fetch(),this.listenTo(Game.collections.mapCollection,"add",function(a){Game.views.map=new Game.Views.MapLook({model:a})}),Game.collections.heroCollection=new Game.Collections.HeroCollection,Game.collections.heroCollection.fetch(),Game.views.hero=new Game.Views.Hero({model:Game.collections.heroCollection.findWhere({heroClass:"whitemageF"})})}}),$(window).keydown(function(a){37==a.keyCode?$(".hero").css({left:"-=80em"}):39==a.keyCode?$(".hero").css({left:"+=80em"}):38==a.keyCode?$(".hero").css({top:"-=80em"}):40==a.keyCode&&$(".hero").css({top:"+=80em"})}),Game.Models.Character=Backbone.Model.extend({idAttribute:"_id",defaults:{heroClass:"",positionX:"0",positionY:"0",textureRight:"",textureLeft:"",health:"",weapon:""}}),Game.Collections.HeroCollection=Backbone.Collection.extend({model:Game.Models.Character,url:"http://tiny-pizza-server.herokuapp.com/collections/jdGameHero"}),Game.Views.Hero=Backbone.View.extend({template:_.template($(".hero-template").text()),className:"hero",initialize:function(){$(".map-container").append(this.el)},render:function(){}}),Game.Models.MapTile=Backbone.Model.extend({idAttribute:"_id",defaults:{position:"",texture:"",passage:""}}),Game.Collections.MapCollection=Backbone.Collection.extend({model:Game.Models.MapTile,url:"http://tiny-pizza-server.herokuapp.com/collections/jdGameMap"}),Game.Views.MapLook=Backbone.View.extend({mapTemplate:_.template($(".map-template").text()),className:"map-piece",initialize:function(){this.listenTo(Game.collections.mapCollection,"sort",this.render),$(".map-container").append(this.el),this.render()},render:function(){this.$el.css({background:"url("+this.model.attributes.texture+")"})}}),Game.models.mapPiece=new Game.Models.MapTile,Game.views.appView=new Game.Views.AppView({model:Game.models.mapPiece});